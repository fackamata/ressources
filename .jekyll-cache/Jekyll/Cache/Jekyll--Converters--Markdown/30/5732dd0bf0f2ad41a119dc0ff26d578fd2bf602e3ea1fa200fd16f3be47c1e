I"ü
<p>docker registry est le cloud, câ€™est lÃ  oÃ¹ les images sont rangÃ©es</p>

<p><img src="/assets/img/docker/imageName.png" alt="image name" /></p>

<p>quand on prÃ©cise quâ€™un seul nom, docker assume que les deux sont similaires</p>

<p>par dÃ©faut toutes les images sont stockÃ©es dans docker hub</p>

<p><img src="/assets/img/docker/dockerIo.png" alt="docker io" /></p>

<h2 id="private-registry">private registry</h2>

<p>si on ne veut pas partager ses images, on les places dans des registres privÃ©s.</p>

<p>AWS, Azure ou BCP donne accÃ¨s Ã  un registre privÃ© par dÃ©faut.</p>

<h2 id="docker-private-registry">docker private registry</h2>

<p>on peut placer des images privÃ© dans docker</p>

<p>on doit alors se loger</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker login private-registry.io
</code></pre></div></div>

<p>et pour lancer un container</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run private-registry.io/apps/internal-app
</code></pre></div></div>

<p>si on est pas loguer, docker nous indiquera que lâ€™image ne peut pas Ãªtre trouvÃ©</p>

<h2 id="docker-registry-local">docker registry local</h2>

<p>docker registry Ã  sa propre image, on peut lancer un container Ã  partir de celle-la.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">-d</span> <span class="nt">-p</span> 5000:5000 <span class="nt">--name</span> registry registry:2
</code></pre></div></div>

<p>pour enregistrer une image dans ce registre</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker image tag my-image localhost:5000/my-image
</code></pre></div></div>
<p>on doit taguer lâ€™image avec lâ€™adresse de notre registre privÃ©</p>

<p>on peut maintenant pusher notre image dans ce registre</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker push localhost:5000/my-image
</code></pre></div></div>

<p>en utilisant la commande <code class="language-plaintext highlighter-rouge">push</code> et les info de notre registre et le nom de notre image</p>

<p>on peut maintenant puller cette image depuis ce rÃ©seau</p>

<p>si on est sur le mÃªme host :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker pull localhost:5000/my-image
</code></pre></div></div>

<p>ou par lâ€™ip ou le nom de domain du docker host, si on est sur un notre host dans notre environnement :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker pull 192.168.56.100:5000/my-image
</code></pre></div></div>

:ET