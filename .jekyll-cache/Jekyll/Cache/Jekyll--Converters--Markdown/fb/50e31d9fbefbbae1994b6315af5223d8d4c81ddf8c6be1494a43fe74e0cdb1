I"#<h2 id="cmd">CMD</h2>

<p>lâ€™instruction <code class="language-plaintext highlighter-rouge">CMD</code> sert Ã  dÃ©finir quelle commande va Ãªtre lancer lors de lâ€™exÃ©cution de notre container</p>

<div class="language-docker highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">FROM</span><span class="s"> ubuntu:14.04</span>
...
<span class="k">CMD</span><span class="s"> ["bash"]</span>
</code></pre></div></div>

<h3 id="format">format</h3>

<p>lâ€™instruction <code class="language-plaintext highlighter-rouge">CMD</code> peuvent Ãªtre Ã©crite de deux faÃ§on</p>

<p>dans un array :</p>
<div class="language-docker highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CMD</span><span class="s"> ["command", "param1"]</span>
<span class="k">CMD</span><span class="s"> ["sleep", "5"]</span>
</code></pre></div></div>

<p>en mode shell :</p>
<div class="language-docker highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CMD</span><span class="s"> command param1</span>
<span class="k">CMD</span><span class="s"> sleep 5</span>
</code></pre></div></div>

<h3 id="inconvÃ©nient">inconvÃ©nient</h3>

<p>avec lâ€™instruction <code class="language-plaintext highlighter-rouge">CMD</code>, lâ€™argument de la commande est codÃ© en dure et on ne peut pas y accÃ©der lorsque lâ€™on run notre container</p>

<h2 id="entrypoint">ENTRYPOINT</h2>

<div class="language-docker highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ENTRYPOINT</span><span class="s"> ["sleep"]</span>
</code></pre></div></div>

<p>avec lâ€™instruction <code class="language-plaintext highlighter-rouge">ENTRYPOINT</code> on va pouvoir donnÃ© un argument Ã  la commande exÃ©cuter lors du run de container</p>

<div class="language-docker highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run ubuntu-sleeper 10
</code></pre></div></div>

<p>câ€™est comme si on avait Ã©crit dans notre Dockerfile</p>
<div class="language-docker highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CMD</span><span class="s"> sleep 10</span>
</code></pre></div></div>

<p>mais cette fois on peut lui donner la valeur souhaitÃ© Ã  chaque lancement de container</p>

<h3 id="valeur-par-dÃ©faut">valeur par dÃ©faut</h3>

<p>si on veut dÃ©finir une valeur par dÃ©faut Ã  notre ENTRYPOINT</p>
<div class="language-docker highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">FROM</span><span class="s"> Ubuntu</span>
<span class="k">ENTRYPOINT</span><span class="s"> ["sleep"]</span>
<span class="k">CMD</span><span class="s"> ["5"]</span>
</code></pre></div></div>

<p>ici lâ€™instruction <code class="language-plaintext highlighter-rouge">CMD</code> va nous permettre de rajouter lâ€™argument 5 Ã  notre <code class="language-plaintext highlighter-rouge">ENTRYPOINT</code> sleep</p>

<p>comme Ã§a si on entre aucun argument, notre container exÃ©cutera la commande sleep pour 5 seconde.</p>

<p>Si on ajoute un argument lors du run de notre container, lâ€™argument de lâ€™instruction <code class="language-plaintext highlighter-rouge">CMD</code> sera remplacer par le notre.</p>

<h3 id="changement-de-entrypoint">changement de ENTRYPOINT</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">--entrypoint</span> sleep2.0 ubuntu-sleeper 10
</code></pre></div></div>
<p>â€“entrypoint =&gt; nouvelle commande Ã  exÃ©cuter lors du lancement de notre container</p>
:ET