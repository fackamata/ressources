<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <title>Cmd Vs Entrypoint - </title>
    <link rel="stylesheet" href="/assets/css/main.css">
  </head>
  <body>
    <nav id="sidebarRight">

    <a href="javascript:void(0)" class="closebtnRight" onclick="closeSideNavRight()">&times;</a>
    
        <!-- docker -->
        <ul>
            
            <li><a href=" /flask/home" 
                docker
                class="  ">
                flask</a>
                
            </li>
        
            <li><a href=" /jekyll/home" 
                docker
                class="  ">
                jekyll</a>
                
            </li>
        
            <li><a href=" /symfony/home" 
                docker
                class="  ">
                symfony</a>
                
            </li>
        
            <li><a href=" /mysql/home" 
                docker
                class="  ">
                mysql</a>
                
            </li>
        
            <li><a href=" /laravel/home" 
                docker
                class="  ">
                laravel</a>
                
            </li>
        
            <li><a href=" /docker/home" 
                docker
                class="  activeTop  ">
                docker</a>
                
            </li>
        
    </ul>
</nav>
    <nav id="sidebar" class="sidenav">
    
    <a href="javascript:void(0)" class="closebtn" onclick="closeSideNavLeft()">&times;</a>
    <ul>
        
        
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
                    
                
                    <li><a href="/docker/home" 
                        class="  ">
                                           
                            home</a>
                        

                    </li>
                
                    <li><a href="/docker/getting-started" 
                        class="  ">
                        
                            getting started</a>
                        

                    </li>
                
                    <li><a href="/docker/run" 
                        class="  ">
                                           
                            run</a>
                        

                    </li>
                
                    <li><a href="/docker/environment-variables" 
                        class="  ">
                        
                            environment variables</a>
                        

                    </li>
                
                    <li><a href="/docker/docker-images" 
                        class="  ">
                        
                            docker images</a>
                        

                    </li>
                
                    <li><a href="/docker/CMD-vs-ENTRYPOINT" 
                        class="  active  ">
                        
                            CMD vs ENTRYPOINT</a>
                        

                    </li>
                
                    <li><a href="/docker/networking" 
                        class="  ">
                                           
                            networking</a>
                        

                    </li>
                
                    <li><a href="/docker/storage" 
                        class="  ">
                                           
                            storage</a>
                        

                    </li>
                
                    <li><a href="/docker/docker-compose" 
                        class="  ">
                        
                            docker compose</a>
                        

                    </li>
                
                    <li><a href="/docker/docker-registry" 
                        class="  ">
                        
                            docker registry</a>
                        

                    </li>
                
                    <li><a href="/docker/container-orcherstration" 
                        class="  ">
                        
                            container orcherstration</a>
                        

                    </li>
                
                    <li><a href="/docker/kubernetes" 
                        class="  ">
                                           
                            kubernetes</a>
                        

                    </li>
                
                    <li><a href="/docker/docker-swarm" 
                        class="  ">
                        
                            docker swarm</a>
                        

                    </li>
                
            
        
    </ul>
</nav>
    
    <button onclick="openSideNavLeft()" id="sideBtnLeft">></button>
    <button onclick="openSideNavRight()" id="sideBtnRight">></button>
    <main>
      <!-- <button onclick="sideFunction()" id="sideBtn" title="Go to top">></button> -->
      <h1>Cmd vs entrypoint</h1>
      
      <h2 id="cmd">CMD</h2>

<p>l’instruction <code class="language-plaintext highlighter-rouge">CMD</code> sert à définir quelle commande va être lancer lors de l’exécution de notre container</p>

<div class="language-docker highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">FROM</span><span class="s"> ubuntu:14.04</span>
...
<span class="k">CMD</span><span class="s"> ["bash"]</span>
</code></pre></div></div>

<h3 id="format">format</h3>

<p>l’instruction <code class="language-plaintext highlighter-rouge">CMD</code> peuvent être écrite de deux façon</p>

<p>dans un array :</p>
<div class="language-docker highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CMD</span><span class="s"> ["command", "param1"]</span>
<span class="k">CMD</span><span class="s"> ["sleep", "5"]</span>
</code></pre></div></div>

<p>en mode shell :</p>
<div class="language-docker highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CMD</span><span class="s"> command param1</span>
<span class="k">CMD</span><span class="s"> sleep 5</span>
</code></pre></div></div>

<h3 id="inconvénient">inconvénient</h3>

<p>avec l’instruction <code class="language-plaintext highlighter-rouge">CMD</code>, l’argument de la commande est codé en dure et on ne peut pas y accéder lorsque l’on run notre container</p>

<h2 id="entrypoint">ENTRYPOINT</h2>

<div class="language-docker highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ENTRYPOINT</span><span class="s"> ["sleep"]</span>
</code></pre></div></div>

<p>avec l’instruction <code class="language-plaintext highlighter-rouge">ENTRYPOINT</code> on va pouvoir donné un argument à la commande exécuter lors du run de container</p>

<div class="language-docker highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run ubuntu-sleeper 10
</code></pre></div></div>

<p>c’est comme si on avait écrit dans notre Dockerfile</p>
<div class="language-docker highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CMD</span><span class="s"> sleep 10</span>
</code></pre></div></div>

<p>mais cette fois on peut lui donner la valeur souhaité à chaque lancement de container</p>

<h3 id="valeur-par-défaut">valeur par défaut</h3>

<p>si on veut définir une valeur par défaut à notre ENTRYPOINT</p>
<div class="language-docker highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">FROM</span><span class="s"> Ubuntu</span>
<span class="k">ENTRYPOINT</span><span class="s"> ["sleep"]</span>
<span class="k">CMD</span><span class="s"> ["5"]</span>
</code></pre></div></div>

<p>ici l’instruction <code class="language-plaintext highlighter-rouge">CMD</code> va nous permettre de rajouter l’argument 5 à notre <code class="language-plaintext highlighter-rouge">ENTRYPOINT</code> sleep</p>

<p>comme ça si on entre aucun argument, notre container exécutera la commande sleep pour 5 seconde.</p>

<p>Si on ajoute un argument lors du run de notre container, l’argument de l’instruction <code class="language-plaintext highlighter-rouge">CMD</code> sera remplacer par le notre.</p>

<h3 id="changement-de-entrypoint">changement de ENTRYPOINT</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">--entrypoint</span> sleep2.0 ubuntu-sleeper 10
</code></pre></div></div>
<p>–entrypoint =&gt; nouvelle commande à exécuter lors du lancement de notre container</p>

      
      <button onclick="topFunction()" id="topBtn" title="Go to top">></button>
    </main>

    <script src="/assets/js/sideBar.js"></script>
    <script src="/assets/js/sideBarRight.js"></script>
    <script src="/assets/js/topButton.js"></script>
    <script src="/assets/js/capitalizeFirstLetter.js"></script>

  </body>
</html>
