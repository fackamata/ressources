<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <title>Linux Structure - </title>
    <link rel="stylesheet" href="/assets/css/main.css">
  </head>
  <body>
    <nav id="sidebarRight">

    <a href="javascript:void(0)" class="closebtnRight" onclick="closeSideNavRight()">&times;</a>
    
        <!-- linux -->
        <ul>
            
            <li><a href=" /php/home" 
                linux
                class="  ">
                php</a>
                
            </li>
        
            <li><a href=" /flask/home" 
                linux
                class="  ">
                flask</a>
                
            </li>
        
            <li><a href=" /jekyll/home" 
                linux
                class="  ">
                jekyll</a>
                
            </li>
        
            <li><a href=" /symfony/home" 
                linux
                class="  ">
                symfony</a>
                
            </li>
        
            <li><a href=" /mysql/home" 
                linux
                class="  ">
                mysql</a>
                
            </li>
        
            <li><a href=" /laravel/home" 
                linux
                class="  ">
                laravel</a>
                
            </li>
        
            <li><a href=" /docker/home" 
                linux
                class="  ">
                docker</a>
                
            </li>
        
            <li><a href=" /linux/home" 
                linux
                class="  activeTop  ">
                linux</a>
                
            </li>
        
            <li><a href=" /git/home" 
                linux
                class="  ">
                git</a>
                
            </li>
        
            <li><a href=" /javascript/home" 
                linux
                class="  ">
                javascript</a>
                
            </li>
        
            <li><a href=" /HTML/home" 
                linux
                class="  ">
                HTML</a>
                
            </li>
        
            <li><a href=" /SEO/home" 
                linux
                class="  ">
                SEO</a>
                
            </li>
        
    </ul>
</nav>
    <nav id="sidebar" class="sidenav">
    
    <a href="javascript:void(0)" class="closebtn" onclick="closeSideNavLeft()">&times;</a>
    <ul>
        
        
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
        
            
            
                    
                
                    <li><a href="/linux/home" 
                        class="  ">
                                           
                            home</a>
                        

                    </li>
                
                    <li><a href="/linux/command-line" 
                        class="  ">
                        
                            command line</a>
                        

                    </li>
                
                    <li><a href="/linux/bash" 
                        class="  ">
                                           
                            bash</a>
                        

                    </li>
                
                    <li><a href="/linux/bash-shortcut" 
                        class="  ">
                        
                            bash shortcut</a>
                        

                    </li>
                
                    <li><a href="/linux/bash-2" 
                        class="  ">
                        
                            bash 2</a>
                        

                    </li>
                
                    <li><a href="/linux/curl" 
                        class="  ">
                                           
                            curl</a>
                        

                    </li>
                
                    <li><a href="/linux/grep" 
                        class="  ">
                                           
                            grep</a>
                        

                    </li>
                
                    <li><a href="/linux/find" 
                        class="  ">
                                           
                            find</a>
                        

                    </li>
                
                    <li><a href="/linux/cheat-sheet" 
                        class="  ">
                        
                            cheat sheet</a>
                        

                    </li>
                
                    <li><a href="/linux/install" 
                        class="  ">
                                           
                            install</a>
                        

                    </li>
                
                    <li><a href="/linux/linux-structure" 
                        class="  active  ">
                        
                            linux structure</a>
                        

                    </li>
                
                    <li><a href="/linux/regex" 
                        class="  ">
                                           
                            regex</a>
                        

                    </li>
                
                    <li><a href="/linux/regexp" 
                        class="  ">
                                           
                            regexp</a>
                        

                    </li>
                
                    <li><a href="/linux/vim" 
                        class="  ">
                                           
                            vim</a>
                        

                    </li>
                
                    <li><a href="/linux/tar" 
                        class="  ">
                                           
                            tar</a>
                        

                    </li>
                
                    <li><a href="/linux/ubuntu" 
                        class="  ">
                                           
                            ubuntu</a>
                        

                    </li>
                
                    <li><a href="/linux/sed" 
                        class="  ">
                                           
                            sed</a>
                        

                    </li>
                
                    <li><a href="/linux/vim" 
                        class="  ">
                                           
                            vim</a>
                        

                    </li>
                
            
        
            
            
        
            
            
        
            
            
        
            
            
        
    </ul>
</nav>
    
    <button onclick="openSideNavLeft()" id="sideBtnLeft">></button>
    <button onclick="openSideNavRight()" id="sideBtnRight">></button>
    <main>
      <!-- <button onclick="sideFunction()" id="sideBtn" title="Go to top">></button> -->
      <h1>Linux structure</h1>
      
      <h1 id="linux-structure">Linux Structure</h1>

<h2 id="philosophy">Philosophy</h2>

<p>Linux follows five core principles:</p>

<table>
  <thead>
    <tr>
      <th>Principle</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Everything is a file</td>
      <td>All configuration files for the various services running on the Linux operating system are stored in one or more text files.</td>
    </tr>
    <tr>
      <td>Small, single-purpose programs</td>
      <td>Linux offers many different tools that we will work with, which can be combined to work together.</td>
    </tr>
    <tr>
      <td>Ability to chain programs together to perform complex tasks</td>
      <td>The integration and combination of different tools enable us to carry out many large and complex tasks, such as processing or filtering specific data results.</td>
    </tr>
    <tr>
      <td>Avoid captive user interfaces</td>
      <td>Linux is designed to work mainly with the shell (or terminal), which gives the user greater control over the operating system.</td>
    </tr>
    <tr>
      <td>Configuration data stored in a text file</td>
      <td>An example of such a file is the /etc/passwd file, which stores all users registered on the system.</td>
    </tr>
  </tbody>
</table>

<h2 id="components">components</h2>

<h3 id="bootloader">Bootloader</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>A piece of code that runs to guide the booting process to start the operating system. Parrot Linux uses the GRUB Bootloader.
</code></pre></div></div>

<h3 id="os-kernel">OS Kernel</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>The kernel is the main component of an operating system. It manages the resources for I/O devices the system at the hardware level.
</code></pre></div></div>

<h3 id="daemons">Daemons</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Background services are called "daemons" in Linux. Their purpose is to ensure that key functions such as scheduling, printing, and multimedia are working correctly. These small programs load after we booted or log into the computer.
</code></pre></div></div>

<h3 id="os-shell">OS Shell</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>The operating system shell or the command language interpreter (also known as the command line) is the interface between the OS and the user. This interface allows the user to tell the OS what to do. The most commonly used shells are Bash, Tcsh/Csh, Ksh, Zsh, and Fish.
</code></pre></div></div>

<p>### Graphics server 	
    This provides a graphical sub-system (server) called “X” or “X-server” that allows graphical programs to run locally or remotely on the X-windowing system.</p>

<h3 id="window-manager">Window Manager</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Also known as a graphical user interface (GUI). There are many options, including GNOME, KDE, MATE, Unity, and Cinnamon. A desktop environment usually has several applications, including file and web browsers. These allow the user to access and manage the essential and frequently accessed features and services of an operating system.
</code></pre></div></div>

<h3 id="utilities">Utilities</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Applications or utilities are programs that perform particular functions for the user or another program.
</code></pre></div></div>

<h2 id="linux-architecture">Linux Architecture</h2>

<p>The Linux operating system can be broken down into layers:</p>

<table>
  <thead>
    <tr>
      <th>Layer</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Hardware</td>
      <td>Peripheral devices such as the system’s RAM, hard drive, CPU, and others.</td>
    </tr>
    <tr>
      <td>Kernel</td>
      <td>The core of the Linux operating system whose function is to virtualize and control common computer hardware resources like CPU, allocated memory, accessed data, and others. The kernel gives each process its own virtual resources and prevents/mitigates conflicts between different processes.</td>
    </tr>
    <tr>
      <td>Shell</td>
      <td>A command-line interface (CLI), also known as a shell that a user can enter commands into to execute the kernel’s functions.</td>
    </tr>
    <tr>
      <td>System Utility</td>
      <td>Makes available to the user all of the operating system’s functionality.</td>
    </tr>
  </tbody>
</table>

<h2 id="file-system-hierarchy">File System Hierarchy</h2>

<p>The Linux operating system is structured in a tree-like hierarchy and is documented in the Filesystem Hierarchy Standard (FHS). Linux is structured with the following standard top-level directories:</p>

<h3>/</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>The top-level directory is the root filesystem and contains all of the files required to boot the operating system before other filesystems are mounted as well as the files required to boot the other filesystems. After boot, all of the other filesystems are mounted at standard mount points as subdirectories of the root.
</code></pre></div></div>

<h3 id="bin">/bin</h3>
 	Contains essential command binaries.
<h3 id="boot">/boot</h3>
 	Consists of the static bootloader, kernel executable, and files required to boot the Linux OS.
<h3 id="dev">/dev</h3>
 	Contains device files to facilitate access to every hardware device attached to the system.
<h3 id="etc">/etc</h3>
 	Local system configuration files. Configuration files for installed applications may be saved here as well.
<h3 id="home">/home</h3>
 	Each user on the system has a subdirectory here for storage.
<h3 id="lib">/lib</h3>
 	Shared library files that are required for system boot.
<h3 id="media">/media</h3>
 	External removable media devices such as USB drives are mounted here.
<h3 id="mnt">/mnt</h3>
 	Temporary mount point for regular filesystems.
<h3 id="opt">/opt</h3>
 	Optional files such as third-party tools can be saved here.
<h3 id="root">/root</h3>
 	The home directory for the root user.
<h3 id="sbin">/sbin</h3>
 	This directory contains executables used for system administration (binary system files).
<h3 id="tmp">/tmp</h3>
 	The operating system and many programs use this directory to store temporary files. This directory is generally cleared upon system boot and may be deleted at other times without any warning.
<h3 id="usr">/usr</h3>
 	Contains executables, libraries, man files, etc.
<h3 id="var">/var</h3>
 	This directory contains variable data files such as log files, email in-boxes, web application related files, cron files, and more.

<h2 id="prompt-description">prompt description</h2>

<p>The bash prompt is easy to understand and, by default, includes information such as the user, hostname, and current working directory. The format can look something like this:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;username&gt;@&lt;<span class="nb">hostname</span><span class="o">&gt;</span>&lt;current working directory&gt;<span class="err">$</span>
</code></pre></div></div>

<p>The home directory for a user is marked with a tilde &lt;~&gt; and is the default folder when we log in.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;username&gt;@&lt;<span class="nb">hostname</span><span class="o">&gt;[</span>~]<span class="err">$</span>
</code></pre></div></div>

<p>The dollar sign, in this case, stands for a user. As soon as we log in as root, the character changes to a hash &lt;#&gt; and looks like this:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@htb[/htb]#
</code></pre></div></div>

<h2 id="system-information">System Information</h2>

<p>Since we will be working with many different Linux systems, we need to learn the structure and the information about the system, its processes, network configurations, users, directories, user settings, and the corresponding parameters. Here is a list of the necessary tools that will help us get the above information. Most of them are installed by default.</p>

<h3 id="whoami">whoami</h3>
 	Displays current username.
<h3 id="id">id</h3>
 	Returns users identity

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>The id command expands on the whoami command and prints out our effective group membership and IDs. This can be of interest to penetration testers looking to see what access a user may have and sysadmins looking to audit account permissions and group membership. In this output, the hackthebox group is of interest because it is non-standard, the adm group means that the user can read log files in /var/log and could potentially gain access to sensitive information, membership in the sudo group is of particular interest as this means our user can run some or all commands as the all-powerful root user. Sudo rights could help us escalate privileges or could be a sign to a sysadmin that they may need to audit permissions and group memberships to remove any access that is not required for a given user to carry out their day-to-day tasks.
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cry0l1t3@htb[/htb]<span class="nv">$ </span><span class="nb">id

</span><span class="nv">uid</span><span class="o">=</span>1000<span class="o">(</span>cry0l1t3<span class="o">)</span> <span class="nv">gid</span><span class="o">=</span>1000<span class="o">(</span>cry0l1t3<span class="o">)</span> <span class="nb">groups</span><span class="o">=</span>1000<span class="o">(</span>cry0l1t3<span class="o">)</span>,1337<span class="o">(</span>hackthebox<span class="o">)</span>,4<span class="o">(</span>adm<span class="o">)</span>,24<span class="o">(</span>cdrom<span class="o">)</span>,27<span class="o">(</span><span class="nb">sudo</span><span class="o">)</span>,30<span class="o">(</span>dip<span class="o">)</span>,46<span class="o">(</span>plugdev<span class="o">)</span>,116<span class="o">(</span>lpadmin<span class="o">)</span>,126<span class="o">(</span>sambashare<span class="o">)</span>
</code></pre></div></div>
<h3 id="hostname">hostname</h3>
 	Sets or prints the name of current host system.
<h3 id="uname">uname</h3>
<p>Prints basic information about the operating system name and system hardware.</p>

<h4 id="uname-to-obtain-kernel-release">Uname to Obtain Kernel Release</h4>

<p>Suppose we want to print out the kernel release to search for potential kernel exploits quickly. We can type uname -r to obtain this information.</p>

<p>Uname to Obtain Kernel Release</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cry0l1t3@htb[/htb]<span class="nv">$ </span><span class="nb">uname</span> <span class="nt">-r</span>

4.15.0-99-generic
</code></pre></div></div>

<p>With this info, we could go and search for “4.15.0-99-generic exploit,” and the first result immediately appears useful to us.</p>

<h3 id="pwd">pwd</h3>
 	Returns working directory name.
<h3 id="ifconfig">ifconfig</h3>
 	The ifconfig utility is used to assign or to view an address to a network interface and/or configure network interface parameters.
<h3 id="ip">ip</h3>
 	Ip is a utility to show or manipulate routing, network devices, interfaces and tunnels.
<h3 id="netstat">netstat</h3>
 	Shows network status.
<h3 id="ss">ss</h3>
 	Another utility to investigate sockets.
<h3 id="ps">ps</h3>
 	Shows process status.
<h3 id="who">who</h3>
 	Displays who is logged in.
<h3 id="env">env</h3>
 	Prints environment or sets and executes command.
<h3 id="lsblk">lsblk</h3>
 	Lists block devices.
<h3 id="lsusb">lsusb</h3>
 	Lists USB devices
<h3 id="lsof">lsof</h3>
 	Lists opened files.
<h3 id="lspci">lspci</h3>
 	Lists PCI devices.

<h3 id="logging-in-via-ssh">Logging In via SSH</h3>

<p>Secure Shell (SSH) refers to a protocol that allows clients to access and execute commands or actions on remote computers. On Linux-based hosts and servers running or another Unix-like operating system, SSH is one of the permanently installed standard tools and is the preferred choice for many administrators to configure and maintain a computer through remote access. It is an older and very proven protocol that does not require or offer a graphical user interface (GUI). For this reason, it works very efficiently and occupies very few resources. We use this type of connection in the following sections and in most of the other modules to offer the possibility to try out the learned commands and actions in a safe environment. We can connect to our targets with the following command:</p>

<h4 id="ssh-login">SSH Login</h4>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>furybar@htb[/htb]<span class="nv">$ </span>ssh <span class="o">[</span>username]@[IP address]
</code></pre></div></div>

<h2 id="user-management">User Management</h2>

<p>User management is an essential part of Linux administration. Sometimes we need to create new users or add other users to specific groups. Another possibility is to execute commands as a different user. After all, it is not too rare that users of only one specific group have the permissions to view or edit specific files or directories. This, in turn, allows us to collect more information locally on the machine, which can be very important. Let us take a look at the following example of how to execute code as a different user.</p>

<h2 id="package-management">package Management</h2>

<p>There are different package management programs that we can use for this. Here is a list of examples of such programs:</p>

<table>
  <thead>
    <tr>
      <th><strong>Command</strong></th>
      <th><strong>Description</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">dpkg</code></td>
      <td>Install, remove and configure Debian-based packages.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">apt</code></td>
      <td>High-level package management command-line utility.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">aptitude</code></td>
      <td>Alternative to <code class="language-plaintext highlighter-rouge">apt</code>.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">snap</code></td>
      <td>Install, remove and configure snap packages.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">gem</code></td>
      <td>Standard package manager for Ruby.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">pip</code></td>
      <td>Standard package manager for Python.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">git</code></td>
      <td>Revision control system command-line utility.</td>
    </tr>
  </tbody>
</table>

<h3 id="advanced-package-manager-apt">Advanced Package Manager (APT)</h3>

<p>Debian-based Linux distributions use the <code class="language-plaintext highlighter-rouge">APT</code> package manager. A package is an archive file containing multiple “.deb” files. The <code class="language-plaintext highlighter-rouge">dpkg</code> utility is used to install programs from the associated “.deb” file. <code class="language-plaintext highlighter-rouge">APT</code> makes updating and installing programs easier because many programs have dependencies. When installing a program from a standalone “.deb” file, we may run into dependency issues and need to download and install one or multiple additional packages. <code class="language-plaintext highlighter-rouge">APT</code> makes this easier and more efficient by packaging together all of the dependencies needed to install a program.</p>

<p>Each Linux distribution uses software repositories that are updated often. When we update a program or install a new one, the system queries these repositories for the desired package. Repositories can be labeled as stable, testing, or unstable. Most Linux distributions utilize the most stable or “main” repository. This can be checked by viewing the contents of the /etc/apt/sources.list file.</p>

<p><code class="language-plaintext highlighter-rouge">APT</code> uses a database called the <code class="language-plaintext highlighter-rouge">APT</code> cache. This is used to provide information about packages installed on our system offline. We can search the <code class="language-plaintext highlighter-rouge">APT</code> cache, for example, to find all <code class="language-plaintext highlighter-rouge">Impacket</code> related packages.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>apt-cache search impacket

python3-pcapy - Python interface to the libpcap packet capture library <span class="o">(</span>Python 3<span class="o">)</span>
polenum - Extracts the password policy from a Windows system
python3-impacket - Python3 module to easily build and dissect network protocols
</code></pre></div></div>

<p>We can then view additional information about a package.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>apt-cache show python3-impacket

Package: python3-impacket
Architecture: all
Version: 0.9.20-5
Priority: optional
Section: universe/python
Source: impacket
Origin: Ubuntu
...
</code></pre></div></div>

<p>We can also list all installed packages.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>apt list <span class="nt">--installed</span>
</code></pre></div></div>

<h3 id="dpkg">DPKG</h3>

<p>We can also download the programs and tools from the repositories separately. In this example, we download ‘strace’ for Ubuntu 18.04 LTS.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> wget http://archive.ubuntu.com/ubuntu/pool/main/s/strace/strace_4.21-1ubuntu1_amd64.deb
</code></pre></div></div>

<p>Furthermore, now we can use both apt and dpkg to install the package. Since we have already worked with apt, we will turn to dpkg in the next example.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nb">sudo </span>dpkg <span class="nt">-i</span> strace_4.21-1ubuntu1_amd64.deb
</code></pre></div></div>

<p>With this, we have already installed the tool and can test if it works properly.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>stach <span class="nt">-h</span>
</code></pre></div></div>

<h3 id="service-and-process-management">Service and Process Management</h3>

<p>In general, there are two types of services: internal, the relevant services that are required at system startup, which for example, perform hardware-related tasks, and services that are installed by the user, which usually include all server services. Such services run in the background without any user interaction. These are also called <code class="language-plaintext highlighter-rouge">daemons</code> and are identified by the letter <code class="language-plaintext highlighter-rouge">'d'</code> at the end of the program name, for example, <code class="language-plaintext highlighter-rouge">sshd</code> or <code class="language-plaintext highlighter-rouge">systemd</code>.</p>

<p>Most Linux distributions have now switched to <code class="language-plaintext highlighter-rouge">systemd</code>. This daemon is an <code class="language-plaintext highlighter-rouge">Init process</code> started first and thus has the process ID (PID) 1. This daemon monitors and takes care of the orderly starting and stopping of other services. All processes have an assigned PID that can be viewed under <code class="language-plaintext highlighter-rouge">/proc/</code> with the corresponding number. Such a process can have a parent process ID (PPID), known as the child process.</p>

<h4 id="systemctl">Systemctl</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>systemctl start ssh
</code></pre></div></div>
<p>After we have started the service, we can now check if it runs without errors.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>systemctl status ssh
</code></pre></div></div>

<p>To add OpenSSH to the SysV script to tell the system to run this service after startup, we can link it with the following command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>systemctl <span class="nb">enable </span>ssh
</code></pre></div></div>

<p>Once we reboot the system, the OpenSSH server will automatically run. We can check this with a tool called <code class="language-plaintext highlighter-rouge">ps</code>.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ps <span class="nt">-aux</span> | <span class="nb">grep </span>ssh
</code></pre></div></div>

<p>We can also use <code class="language-plaintext highlighter-rouge">systemctl</code> to list all services.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> systemctl list-units <span class="nt">--type</span><span class="o">=</span>service
</code></pre></div></div>

<p>It is quite possible that the services do not start due to an error. To see the problem, we can use the tool <code class="language-plaintext highlighter-rouge">journalctl</code> to view the logs.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>journalctl <span class="nt">-u</span> ssh.service <span class="nt">--no-pager</span>
</code></pre></div></div>

<p>#### Kill a Process</p>

<p>A process can be in the following states:</p>

<ul>
  <li>Running</li>
  <li>Waiting (waiting for an event or system resource)</li>
  <li>Stopped</li>
  <li>Zombie (stopped but still has an entry in the process table).</li>
</ul>

<p>Processes can be controlled using <code class="language-plaintext highlighter-rouge">kill</code>, <code class="language-plaintext highlighter-rouge">pkill</code>, <code class="language-plaintext highlighter-rouge">pgrep</code>, and <code class="language-plaintext highlighter-rouge">killall</code>. To interact with a process, we must send a signal to it. We can view all signals with the following command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">kill</span> <span class="nt">-l</span>
</code></pre></div></div>

<p>The most commonly used are:</p>

<table>
  <thead>
    <tr>
      <th><strong>Signal</strong></th>
      <th><strong>Description</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">1</code></td>
      <td><code class="language-plaintext highlighter-rouge">SIGHUP</code> - This is sent to a process when the terminal that controls it is closed.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">2</code></td>
      <td><code class="language-plaintext highlighter-rouge">SIGINT</code> - Sent when a user presses <code class="language-plaintext highlighter-rouge">[Ctrl] + C</code> in the controlling terminal to interrupt a process.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">3</code></td>
      <td><code class="language-plaintext highlighter-rouge">SIGQUIT</code> - Sent when a user presses <code class="language-plaintext highlighter-rouge">[Ctrl] + D</code> to quit.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">9</code></td>
      <td><code class="language-plaintext highlighter-rouge">SIGKILL</code> - Immediately kill a process with no clean-up operations.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">15</code></td>
      <td><code class="language-plaintext highlighter-rouge">SIGTERM</code> - Program termination.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">19</code></td>
      <td><code class="language-plaintext highlighter-rouge">SIGSTOP</code> - Stop the program. It cannot be handled anymore.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">20</code></td>
      <td><code class="language-plaintext highlighter-rouge">SIGTSTP</code> - Sent when a user presses <code class="language-plaintext highlighter-rouge">[Ctrl] + Z</code> to request for a service to suspend. The user can handle it afterward.</td>
    </tr>
  </tbody>
</table>

<p>For example, if a program were to freeze, we could force to kill it with the following command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">kill </span>9 &lt;PID&gt;
</code></pre></div></div>

<p>#### Background a Process</p>

<p>Sometimes it will be necessary to put the scan or process we just started in the background to continue using the current session to interact with the system or start other processes. As we have already seen, we can do this with the shortcut <code class="language-plaintext highlighter-rouge">[Ctrl + Z]</code>. As mentioned above, we send the <code class="language-plaintext highlighter-rouge">SIGTSTP</code> signal to the kernel, which suspends the process.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ping <span class="nt">-c</span> 10 www.google.com

vim tmpfile
	<span class="o">[</span>Ctrl + Z]
	<span class="o">[</span>2]+  Stopped                 vim tmpfile
</code></pre></div></div>

<p>Now all background processes can be displayed with the following command.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">jobs</span>

	<span class="o">[</span>1]+  Stopped                 ping <span class="nt">-c</span> 10 www.hackthebox.eu
	<span class="o">[</span>2]+  Stopped                 vim tmpfile
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">[Ctrl] + Z</code> shortcut suspends the processes, and they will not be executed further. To keep it running in the background, we have to enter the command <code class="language-plaintext highlighter-rouge">bg</code> to put the process in the background.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">bg</span>

<span class="nv">$ </span>
<span class="nt">---</span> www.google.com ping statistics <span class="nt">---</span>
10 packets transmitted, 0 received, 100% packet loss, <span class="nb">time </span>113482ms

<span class="o">[</span>ENTER]
<span class="o">[</span>1]+  Exit 1                  ping <span class="nt">-c</span> 10 www.google.com

</code></pre></div></div>

<p>Another option is to automatically set the process with an AND sign (<code class="language-plaintext highlighter-rouge">&amp;</code>) at the end of the command.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ping <span class="nt">-c</span> 10 www.google.com &amp;

<span class="o">[</span>1] 10825
PING www.google.com <span class="o">(</span>8.8.1.1<span class="o">)</span> 56<span class="o">(</span>84<span class="o">)</span> bytes of data.
</code></pre></div></div>

<p>Once the process finishes, we will see the results.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>

<span class="nt">---</span> www.google.com ping statistics <span class="nt">---</span>
10 packets transmitted, 0 received, 100% packet loss, <span class="nb">time </span>9210ms

<span class="o">[</span>ENTER]
<span class="o">[</span>1]+  Exit 1                  ping <span class="nt">-c</span> 10 www.google.com
</code></pre></div></div>

<h4 id="foreground-a-process">Foreground a Process</h4>

<p>After that, we can use the <code class="language-plaintext highlighter-rouge">jobs</code> command to list all background processes. Backgrounded processes do not require user interaction, and we can use the same shell session without waiting until the process finishes first. Once the scan or process finishes its work, we will get notified by the terminal that the process is finished.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">jobs</span>

<span class="o">[</span>1]+  Running                 ping <span class="nt">-c</span> 10 www.google.com &amp;
</code></pre></div></div>

<p>If we want to get the background process into the foreground and interact with it again, we can use the fg <ID> command.</ID></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">fg </span>1
ping <span class="nt">-c</span> 10 www.google.com

<span class="nt">---</span> www.google.com ping statistics <span class="nt">---</span>
10 packets transmitted, 0 received, 100% packet loss, <span class="nb">time </span>9206ms
</code></pre></div></div>

<p>### Execute Multiple Commands</p>

<p>There are three possibilities to run several commands, one after the other. These are separated by:</p>

<ul>
  <li>Semicolon (<code class="language-plaintext highlighter-rouge">;</code>)</li>
  <li>Double ampersand characters (<code class="language-plaintext highlighter-rouge">&amp;&amp;</code>)</li>
  <li>Pipes (<code class="language-plaintext highlighter-rouge">|</code>)</li>
</ul>

<p>The difference between them lies in the previous processes’ treatment and depends on whether the previous process was completed successfully or with errors. The semicolon (;) is a command separator and executes the commands by ignoring previous commands’ results and errors.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'1'</span><span class="p">;</span> <span class="nb">echo</span> <span class="s1">'2'</span><span class="p">;</span> <span class="nb">echo</span> <span class="s1">'3'</span>
</code></pre></div></div>

<p>For example, if we execute the same command but replace it in second place, the command ls with a file that does not exist, we get an error, and the third command will be executed nevertheless.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s1">'1'</span><span class="p">;</span> <span class="nb">ls </span>MISSING_FILE<span class="p">;</span> <span class="nb">echo</span> <span class="s1">'3'</span>

	1
	<span class="nb">ls</span>: cannot access <span class="s1">'MISSING_FILE'</span>: No such file or directory
	3
</code></pre></div></div>

<p>However, it looks different if we use the double AND characters (<code class="language-plaintext highlighter-rouge">&amp;&amp;</code>) to run the commands one after the other. If there is an error in one of the commands, the following ones will not be executed anymore, and the whole process will be stopped.</p>

<table>
  <tbody>
    <tr>
      <td>Pipes (</td>
      <td>) depend not only on the correct and error-free operation of the previous processes but also on the previous processes’ results.</td>
    </tr>
  </tbody>
</table>

<h2 id="working-with-web-services">Working with Web Services</h2>

<p>Another essential component is the communication with the web servers. There are many different ways to set up web servers on Linux operating systems. One of the most used and widespread web servers, besides IIS and Nginx, is Apache. For an Apache web server, we can use appropriate modules, which can encrypt the communication between browser and web server (mod_ssl), use as a proxy server (mod_proxy), or perform complex manipulations of HTTP header data (mod_headers) and URLs (mod_rewrite).</p>

<p>Apache offers the possibility to create web pages dynamically using server-side scripting languages. Commonly used scripting languages are PHP, Perl, or Ruby. Other languages are Python, JavaScript, Lua, and .NET, which can be used for this. We can install the Apache webserver with the following command.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>apt <span class="nb">install </span>apache2 <span class="nt">-y</span>
</code></pre></div></div>

<p>After we have started it, we can navigate using our browser to the default page (http://localhost).</p>

<p>This is the default page after installation and serves to confirm that the webserver is working correctly.</p>

<p>### CURL</p>

<p><code class="language-plaintext highlighter-rouge">cURL</code> is a tool that allows us to transfer files from the shell over protocols like <code class="language-plaintext highlighter-rouge">HTTP</code>, <code class="language-plaintext highlighter-rouge">HTTPS</code>, <code class="language-plaintext highlighter-rouge">FTP</code>, <code class="language-plaintext highlighter-rouge">SFTP</code>, <code class="language-plaintext highlighter-rouge">FTPS</code>, or <code class="language-plaintext highlighter-rouge">SCP</code>. This tool gives us the possibility to control and test websites remotely. Besides the remote servers’ content, we can also view individual requests to look at the client’s and server’s communication. Usually, <code class="language-plaintext highlighter-rouge">cURL</code> is already installed on most Linux systems. This is another critical reason to familiarize ourselves with this tool, as it can make some processes much easier later on.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl http://localhost
</code></pre></div></div>

<p>In the title tag, we can see that it is the same text as from our browser. This allows us to inspect the source code of the website and get information from it. Nevertheless, we will come back to this in another module.</p>

<h2 id="wget">Wget</h2>

<p>An alternative to curl is the tool <code class="language-plaintext highlighter-rouge">wget</code>. With this tool, we can download files from FTP or HTTP servers directly from the terminal and serves as a good download manager. If we use wget in the same way, the difference to curl is that the website content is downloaded and stored locally, as shown in the following example.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget http://localhost
</code></pre></div></div>

<h2 id="python-3">Python 3</h2>

<p>Another option that is often used when it comes to data transfer is the use of Python 3. In this case, the web server’s root directory is where the command is executed to start the server. For this example, we are in a directory where WordPress is installed and contains a “readme.html.” Now, let us start the Python 3 web server and see if we can access it using the browser.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python3 <span class="nt">-m</span> http.server
</code></pre></div></div>

<p>We can see what requests were made if we now look at our Python 3 web server’s events.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>python3 <span class="nt">-m</span> http.server

Serving HTTP on 0.0.0.0 port 8000 <span class="o">(</span>http://0.0.0.0:8000/<span class="o">)</span> ...
127.0.0.1 - - <span class="o">[</span>15/May/2020 17:56:29] <span class="s2">"GET /readme.html HTTP/1.1"</span> 200 -
127.0.0.1 - - <span class="o">[</span>15/May/2020 17:56:29] <span class="s2">"GET /wp-admin/css/install.css?ver=20100228 HTTP/1.1"</span> 200 -
127.0.0.1 - - <span class="o">[</span>15/May/2020 17:56:29] <span class="s2">"GET /wp-admin/images/wordpress-logo.png HTTP/1.1"</span> 200 -
127.0.0.1 - - <span class="o">[</span>15/May/2020 17:56:29] <span class="s2">"GET /wp-admin/images/wordpress-logo.svg?ver=20131107 HTTP/1.1"</span> 200 -
</code></pre></div></div>

<p>## Working with Files and Directories</p>

<p>### Create a Directory</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir </span>Storage
</code></pre></div></div>

<p>We may want to have specific directories in the directory, and it would be very time-consuming to create this command for every single directory. The command <code class="language-plaintext highlighter-rouge">mkdir</code> has an option marked <code class="language-plaintext highlighter-rouge">-p</code> to add parent directories.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir</span> <span class="nt">-p</span> Storage/local/user/documents
</code></pre></div></div>

<p>We can look at the whole structure after creating the parent directories with the tool tree.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>tree <span class="nb">.</span>

<span class="nb">.</span>
├── info.txt
└── Storage
    └── <span class="nb">local</span>
        └── user
            └── documents

4 directories, 1 file
</code></pre></div></div>

<p>### Mouve and rename</p>

<p>With the command <code class="language-plaintext highlighter-rouge">mv</code>, we can move and also rename files and directories. The syntax for this looks like this:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mv</span> &lt;file/directory&gt; &lt;renamed file/directory&gt;
</code></pre></div></div>

<p>## Editing Files</p>

<p>There are several ways to edit a file. One of the most common text editors for this is <code class="language-plaintext highlighter-rouge">Vi</code> and <code class="language-plaintext highlighter-rouge">Vim</code>. More rarely, there is the <code class="language-plaintext highlighter-rouge">Nano</code> editor. We will first deal with the <code class="language-plaintext highlighter-rouge">Nano</code> editor here, as it is a bit easier to understand. We can create a new file directly with the Nano editor by specifying the file’s name directly as the first parameter. In this case, we create a new file named notes.txt.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nano notes.txt
</code></pre></div></div>

<p>Now we should see a so-called “<code class="language-plaintext highlighter-rouge">pager</code>” open, and we can freely enter or insert any text.</p>

<p>In <code class="language-plaintext highlighter-rouge">nano</code> the caret (^) stands for our “[CTRL]” key. For example, if we press <code class="language-plaintext highlighter-rouge">[CTRL + W]</code>, a “Search:” line appears at the bottom of the editor, where we can enter the word or words we are looking for. If we now search for the word “we” and press <code class="language-plaintext highlighter-rouge">[ENTER]</code>, the cursor will move to the first word that matches.</p>

<p>To jump to the next match with the cursor, we press <code class="language-plaintext highlighter-rouge">[CTRL + W]</code> again and confirm with <code class="language-plaintext highlighter-rouge">[ENTER]</code> without any additional information.</p>

<h2 id="vim">VIM</h2>

<p><code class="language-plaintext highlighter-rouge">Vim</code> is an open-source editor for all kinds of ASCII text, just like Nano. It is an improved clone of the previous Vi. It is an extremely powerful editor that focuses on the essentials, namely editing text. For tasks that go beyond that, Vim provides an interface to external programs, such as <code class="language-plaintext highlighter-rouge">grep</code>, <code class="language-plaintext highlighter-rouge">awk</code>, <code class="language-plaintext highlighter-rouge">sed</code>, etc., which can handle their specific tasks much better than a corresponding function directly implemented in an editor usually can. This makes the editor small and compact, fast, powerful, flexible, and less error-prone.</p>

<p>Vim follows the Unix principle here: many small specialized programs that are well tested and proven, when combined and communicating with each other, resulting in a flexible and powerful system.</p>


      
      <button onclick="topFunction()" id="topBtn" title="Go to top">></button>
    </main>

    <script src="/assets/js/sideBar.js"></script>
    <script src="/assets/js/sideBarRight.js"></script>
    <script src="/assets/js/topButton.js"></script>
    <script src="/assets/js/capitalizeFirstLetter.js"></script>

  </body>
</html>
